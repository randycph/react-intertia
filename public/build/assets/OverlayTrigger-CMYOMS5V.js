import{c as Y}from"./useWindow-fHbKz-ul.js";import{P as Z}from"./index-BPNO3JeG.js";import{r,H as ee,j as v}from"./app-DJ9lNZKt.js";import{u as te}from"./useTimeout-BtpEDhG0.js";import{a as ne}from"./hook-Cf71b7BK.js";import{o as oe,l as se,u as K}from"./useMergedRefs-uwNiKW6A.js";import{i as re,g as ae}from"./utils-D0e7XQLU.js";import{u as N,c as b,d as W}from"./ThemeProvider-DULPDAZ2.js";import{b as ie,g as le,u as H,a as ce,m as ue}from"./mergeOptionsWithPopperConfig-BuuC2CUu.js";import{u as fe}from"./useMergedRefs-CmfvmyYM.js";import{u as de}from"./useEventCallback-CB2MXAiO.js";import{u as U,r as me,h as $}from"./hasClass-Dy5X-dlu.js";import{u as he}from"./useEventCallback-BoF_BJ3-.js";import{u as pe}from"./useIsomorphicEffect-gbxXprRi.js";import{F as I}from"./Fade-CvaMhcqA.js";import{f as S}from"./TransitionWrapper-DyioR6W3.js";const ve=()=>{};function ge(e,n,{disabled:t,clickTrigger:o}={}){const s=n||ve;ie(e,s,{disabled:t,clickTrigger:o});const i=de(l=>{re(l)&&s(l)});r.useEffect(()=>{if(t||e==null)return;const l=oe(le(e));let h=(l.defaultView||window).event;const u=se(l,"keyup",d=>{if(d===h){h=void 0;return}i(d)});return()=>{u()}},[e,t,i])}const z=r.forwardRef((e,n)=>{const{flip:t,offset:o,placement:s,containerPadding:i,popperConfig:l={},transition:h,runTransition:u}=e,[d,y]=H(),[R,w]=H(),m=fe(y,n),f=U(e.container),T=U(e.target),[a,p]=r.useState(!e.show),c=ce(T,d,ue({placement:s,enableEvents:!!e.show,containerPadding:i||5,flip:t,offset:o,arrowElement:R,popperConfig:l}));e.show&&a&&p(!1);const x=(...D)=>{p(!0),e.onExited&&e.onExited(...D)},E=e.show||!a;if(ge(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!E)return null;const{onExit:F,onExiting:C,onEnter:O,onEntering:j,onEntered:_}=e;let P=e.children(Object.assign({},c.attributes.popper,{style:c.styles.popper,ref:m}),{popper:c,placement:s,show:!!e.show,arrowProps:Object.assign({},c.attributes.arrow,{style:c.styles.arrow,ref:w})});return P=me(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:P,onExit:F,onExiting:C,onExited:x,onEnter:O,onEntering:j,onEntered:_}),f?ee.createPortal(P,f):null});z.displayName="Overlay";const A=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...o},s)=>(n=N(n,"popover-header"),v.jsx(t,{ref:s,className:b(e,n),...o})));A.displayName="PopoverHeader";const B=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...o},s)=>(n=N(n,"popover-body"),v.jsx(t,{ref:s,className:b(e,n),...o})));B.displayName="PopoverBody";function V(e,n){let t=e;return e==="left"?t=n?"end":"start":e==="right"&&(t=n?"start":"end"),t}function q(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const G=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:o,children:s,body:i,arrowProps:l,hasDoneInitialMeasure:h,popper:u,show:d,...y},R)=>{const w=N(e,"popover"),m=W(),[f]=(n==null?void 0:n.split("-"))||[],T=V(f,m);let a=o;return d&&!h&&(a={...o,...q(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:R,role:"tooltip",style:a,"x-placement":f,className:b(t,w,f&&`bs-popover-${T}`),...y,children:[v.jsx("div",{className:"popover-arrow",...l}),i?v.jsx(B,{children:s}):s]})});G.displayName="Popover";const ye=Object.assign(G,{Header:A,Body:B,POPPER_OFFSET:[0,8]}),J=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:o,children:s,arrowProps:i,hasDoneInitialMeasure:l,popper:h,show:u,...d},y)=>{e=N(e,"tooltip");const R=W(),[w]=(n==null?void 0:n.split("-"))||[],m=V(w,R);let f=o;return u&&!l&&(f={...o,...q(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:y,style:f,role:"tooltip","x-placement":w,className:b(t,e,`bs-tooltip-${m}`),...d,children:[v.jsx("div",{className:"tooltip-arrow",...i}),v.jsx("div",{className:`${e}-inner`,children:s})]})});J.displayName="Tooltip";const Re=Object.assign(J,{TOOLTIP_OFFSET:[0,6]});function we(e){const n=r.useRef(null),t=N(void 0,"popover"),o=N(void 0,"tooltip"),s=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if($(n.current,t))return ye.POPPER_OFFSET;if($(n.current,o))return Re.TOOLTIP_OFFSET}return[0,0]}}}),[e,t,o]);return[n,[s]]}function Ee(e,n){const{ref:t}=e,{ref:o}=n;e.ref=t.__wrapped||(t.__wrapped=s=>t(S(s))),n.ref=o.__wrapped||(o.__wrapped=s=>o(S(s)))}const Q=r.forwardRef(({children:e,transition:n=I,popperConfig:t={},rootClose:o=!1,placement:s="top",show:i=!1,...l},h)=>{const u=r.useRef({}),[d,y]=r.useState(null),[R,w]=we(l.offset),m=K(h,R),f=n===!0?I:n||void 0,T=he(a=>{y(a),t==null||t.onFirstUpdate==null||t.onFirstUpdate(a)});return pe(()=>{d&&l.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[d,l.target]),r.useEffect(()=>{i||y(null)},[i]),v.jsx(z,{...l,ref:m,popperConfig:{...t,modifiers:w.concat(t.modifiers||[]),onFirstUpdate:T},transition:f,rootClose:o,placement:s,show:i,children:(a,{arrowProps:p,popper:c,show:x})=>{var E;Ee(a,p);const F=c==null?void 0:c.placement,C=Object.assign(u.current,{state:c==null?void 0:c.state,scheduleUpdate:c==null?void 0:c.update,placement:F,outOfBoundaries:(c==null||(E=c.state)==null||(E=E.modifiersData.hide)==null?void 0:E.isReferenceHidden)||!1,strategy:t.strategy}),O=!!d;return typeof e=="function"?e({...a,placement:F,show:x,...!n&&x&&{className:"show"},popper:C,arrowProps:p,hasDoneInitialMeasure:O}):r.cloneElement(e,{...a,placement:F,arrowProps:p,popper:C,hasDoneInitialMeasure:O,className:b(e.props.className,!n&&x&&"show"),style:{...e.props.style,...a.style}})}})});Q.displayName="Overlay";function Oe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function L(e,n,t){const[o]=n,s=o.currentTarget,i=o.relatedTarget||o.nativeEvent[t];(!i||i!==s)&&!Y(s,i)&&e(...n)}Z.oneOf(["click","hover","focus"]);const $e=({trigger:e=["hover","focus"],overlay:n,children:t,popperConfig:o={},show:s,defaultShow:i=!1,onToggle:l,delay:h,placement:u,flip:d=u&&u.indexOf("auto")!==-1,...y})=>{const R=r.useRef(null),w=K(R,ae(t)),m=te(),f=r.useRef(""),[T,a]=ne(s,i,l),p=Oe(h),{onFocus:c,onBlur:x,onClick:E}=typeof t!="function"?r.Children.only(t).props:{},F=g=>{w(S(g))},C=r.useCallback(()=>{if(m.clear(),f.current="show",!p.show){a(!0);return}m.set(()=>{f.current==="show"&&a(!0)},p.show)},[p.show,a,m]),O=r.useCallback(()=>{if(m.clear(),f.current="hide",!p.hide){a(!1);return}m.set(()=>{f.current==="hide"&&a(!1)},p.hide)},[p.hide,a,m]),j=r.useCallback((...g)=>{C(),c==null||c(...g)},[C,c]),_=r.useCallback((...g)=>{O(),x==null||x(...g)},[O,x]),P=r.useCallback((...g)=>{a(!T),E==null||E(...g)},[E,a,T]),D=r.useCallback((...g)=>{L(C,g,"fromElement")},[C]),X=r.useCallback((...g)=>{L(O,g,"toElement")},[O]),M=e==null?[]:[].concat(e),k={ref:F};return M.indexOf("click")!==-1&&(k.onClick=P),M.indexOf("focus")!==-1&&(k.onFocus=j,k.onBlur=_),M.indexOf("hover")!==-1&&(k.onMouseOver=D,k.onMouseOut=X),v.jsxs(v.Fragment,{children:[typeof t=="function"?t(k):r.cloneElement(t,k),v.jsx(Q,{...y,show:T,onHide:O,flip:d,placement:u,popperConfig:o,target:R.current,children:n})]})};export{$e as O,ye as P,Re as T};
