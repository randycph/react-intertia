import{u as ne,a as ce,r as i,j as e,R as de,S as me}from"./app-DJ9lNZKt.js";import{S as he}from"./react-select.esm-DlAAIu4W.js";import{F as pe}from"./index-BgqwIfsn.js";import{h as V}from"./moment-C5S46NFB.js";import{B as ue}from"./BreadCrumb-DptkYxTd.js";import{l as xe}from"./lodash-DsUMJnec.js";import{u as ge}from"./user-dummy-img-Dka7rpSK.js";import{T as fe}from"./TableContainer-Bos8pyxb.js";import{D as P}from"./DeleteModal-3poqUweW.js";import je from"./CrmFilter-CLnEQu2R.js";import{u as be,c as Ce,a as h}from"./index.esm-D-RwZ-3v.js";import{L as Ne}from"./Loader-YhLMuY9y.js";import{Q as ke,B as ye}from"./ReactToastify-Deamh4hC.js";import{c as ve}from"./reselect-CiXCCDx7.js";import{L as Le}from"./index-DpudfFv3.js";import"./calender-BnoOcmFC.js";import{i as Fe,j as R,k as Se,l as De}from"./thunk-IRCMw7Nt.js";import{F as s}from"./Form-C033pu5b.js";import{B as x}from"./Button-CuH19iuM.js";import{C as Me}from"./Container-CvocRkeq.js";import{R as v}from"./Row-roud0IXL.js";import{C as c}from"./Col-DyRDVTOE.js";import{C as L}from"./Card-D2MxoiZF.js";import{D as m}from"./Dropdown-DKQNIyX0.js";import{M as f}from"./Modal-YvJPb8oE.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./defineProperty-DCeX_3u8.js";import"./hoist-non-react-statics.cjs-DJXTA7Zh.js";import"./index-BPNO3JeG.js";import"./index-B0_y2E3k.js";import"./Table-D_ebPWJW.js";import"./ThemeProvider-DULPDAZ2.js";import"./Offcanvas-9pMqH9cF.js";import"./useIsomorphicEffect-gbxXprRi.js";import"./useEventCallback-BoF_BJ3-.js";import"./AbstractModalHeader-BZ_-ewIz.js";import"./useMergedRefs-uwNiKW6A.js";import"./useWindow-fHbKz-ul.js";import"./usePrevious-CdVnRV1P.js";import"./useEventCallback-CB2MXAiO.js";import"./hasClass-Dy5X-dlu.js";import"./useMergedRefs-CmfvmyYM.js";import"./NoopTransition-DDGc146H.js";import"./utils-D0e7XQLU.js";import"./TransitionWrapper-DyioR6W3.js";import"./querySelectorAll-Cwpyv69p.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-CdFJUueb.js";import"./Fade-CvaMhcqA.js";import"./divWithClassName-CUchJ8Fk.js";import"./ElementChildren-cxodCQNB.js";import"./isSymbol-qHNDJudD.js";import"./Spinner-BKmQYXr4.js";import"./logo-sm-DmJR8Lua.js";import"./logo-dark-Dh4DV6bR.js";import"./logo-light-l2wwNDet.js";import"./index-BgmDxEut.js";import"./avatar-2-B-1-S_lh.js";import"./avatar-3-CSm6kh8B.js";import"./avatar-5-D7m8bZ3v.js";import"./russia-DLyLD2KG.js";import"./bitbucket-C11sTxQc.js";import"./dropbox-kAuTPoR1.js";import"./slack-CK7S0DPT.js";import"./img-1-DS69PRDs.js";import"./img-2-9-eXUNQa.js";import"./img-3-BgFVQ164.js";import"./img-6-BK084NdC.js";import"./img-5-BJiQRUIS.js";import"./avatar-1-PHP4S1R6.js";import"./avatar-8-BaCFiEfo.js";import"./avatar-6-DJX3lkeY.js";import"./Tab-BTDWJyFY.js";import"./SSRProvider-DGEn56b5.js";import"./NavItem-DsdiWNwB.js";import"./NavContext-CPRlH_-r.js";import"./Button-C6fGWg8U.js";import"./Nav-CnBczHQb.js";import"./hook-Cf71b7BK.js";import"./Nav-C0bvOcAJ.js";import"./useForceUpdate-DqUM71TE.js";import"./NavbarContext-Dj0od0Bw.js";import"./CardHeaderContext-Cl3hpDYW.js";import"./NavLink-DrL7f9PK.js";import"./Anchor-Cbr8ECqp.js";import"./Collapse-tr0twy1E.js";import"./ltc-BjMPbQSH.js";import"./dash-TnNMg90k.js";import"./img-1-Jhxup-Mz.js";import"./img-2-BKxLD3CN.js";import"./img-3-B4j7qXDU.js";import"./img-6-B4dmEj4y.js";import"./img-5-DVLY-X7O.js";import"./img-3-BL14nKmC.js";import"./img-4-CtrsL6tB.js";import"./img-6-_pG5cMGi.js";import"./img-8-RHtA4ZFb.js";import"./avatar-4-BkrIkC6X.js";import"./avatar-7-ChzoTmzs.js";import"./avatar-9-iQiecx18.js";import"./avatar-10-BcqtGVJW.js";import"./mergeOptionsWithPopperConfig-BuuC2CUu.js";import"./InputGroupContext-Dl5KJOKt.js";import"./useWillUnmount-takmel8K.js";const Be=()=>{const d=ne(),T=ve(a=>a.Crm,a=>({leads:a.leads,isLeadsSuccess:a.isLeadsSuccess,error:a.error})),{leads:r,isLeadsSuccess:we,error:q}=ce(T);i.useEffect(()=>{r&&!r.length&&d(Fe())},[d]),i.useEffect(()=>{p(r)},[r]),i.useEffect(()=>{xe.isEmpty(r)||(p(r),g(!1))},[r]);const[j,g]=i.useState(!1),[o,p]=i.useState([]),[K,b]=i.useState(!1),[Y,C]=i.useState(!1),[N,k]=i.useState(!1),[F,S]=i.useState(!1),[_,D]=i.useState([]),[z,M]=i.useState([]),H=a=>{D(a);const l=a.map(n=>n.value);M(l)},U=[{label:"Exiting",value:"Exiting"},{label:"Lead",value:"Lead"},{label:"Long-term",value:"Long-term"},{label:"Partner",value:"Partner"}],u=i.useCallback(()=>{N?(k(!1),p("")):(k(!0),D([]),M([]))},[N]),$=()=>{o&&(d(R(o.id)),b(!1))},G=a=>{p(a),b(!0)},Q=()=>{p(""),g(!1),u()},W=()=>{S(!F)},t=be({enableReinitialize:!0,initialValues:{img:o&&o.img||"",name:o&&o.name||"",company:o&&o.company||"",score:o&&o.score||"",phone:o&&o.phone||"",location:o&&o.location||"",date:o&&o.date||"",tags:o&&o.tags||""},validationSchema:Ce({name:h().required("Please Enter Name"),company:h().required("Please Enter Company"),score:h().required("Please Enter Score"),phone:h().required("Please Enter Phone"),location:h().required("Please Enter Location"),img:h().required("Please Enter Image"),date:h().required("Please Enter Date")}),onSubmit:a=>{if(j){const l={id:o?o.id:0,img:a.img,name:a.name,company:a.company,score:a.score,phone:a.phone,location:a.location,date:a.date,tags:a.tags};d(Se(l)),t.resetForm()}else{const l={id:(Math.floor(Math.random()*10)+20).toString(),img:a.img,name:a.name,company:a.company,score:a.score,phone:a.phone,location:a.location,date:a.date,tags:z};d(De(l)),t.resetForm()}u()}}),B=i.useCallback(a=>{const l=a;p({id:l.id,img:l.img,name:l.name,company:l.company,score:l.score,phone:l.phone,location:l.location,date:l.date,tags:l.tags}),g(!0),u()},[u]),[J,E]=i.useState(),[O,X]=i.useState(),Z=a=>{const l=[...J,a];E(l),t.setFieldValue("img",l)};i.useEffect(()=>{E(o&&o.img||[])},[o]);const ee=a=>{const l=a.target.files[0],n=new FileReader;n.onload=A=>{t.setFieldValue("img",A.target.result),X(A.target.result)},n.readAsDataURL(l)},ae=a=>V(new Date(a)).format("DD MMM Y"),w=i.useCallback(()=>{const a=document.getElementById("checkBoxAll"),l=document.querySelectorAll(".leadsCheckBox");a.checked?l.forEach(n=>{n.checked=!0}):l.forEach(n=>{n.checked=!1}),I()},[]),[te,le]=i.useState([]),[se,y]=i.useState(!1),oe=()=>{const a=document.getElementById("checkBoxAll");te.forEach(l=>{d(R(l.value)),setTimeout(()=>{ye.clearWaitingQueue()},3e3)}),y(!1),a.checked=!1},I=()=>{const a=document.querySelectorAll(".leadsCheckBox:checked");a.length>0?y(!0):y(!1),le(a)},ie={multiValue:(a,{data:l})=>({...a,backgroundColor:"#3762ea"}),multiValueLabel:(a,{data:l})=>({...a,backgroundColor:"#405189",color:"white"}),multiValueRemove:(a,{data:l})=>({...a,color:"white",backgroundColor:"#405189",":hover":{backgroundColor:"#405189",color:"white"}})},re=i.useMemo(()=>[{header:e.jsx(s.Check.Input,{type:"checkbox",className:"form-check-input",id:"checkBoxAll",onClick:()=>w()}),cell:a=>e.jsx(s.Check.Input,{type:"checkbox",className:"leadsCheckBox form-check-input",value:a.getValue(),onChange:()=>I()}),id:"#"},{header:"Name",accessorKey:"name",enableColumnFilter:!1,cell:a=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:a.row.original.img,alt:"",className:"avatar-xxs rounded-circle"})}),e.jsx("div",{className:"flex-grow-1 ms-2 name",children:a.getValue()})]})})},{header:"Company",accessorKey:"company",enableColumnFilter:!1},{header:"Leads Score",accessorKey:"score",enableColumnFilter:!1},{header:"Phone",accessorKey:"phone",enableColumnFilter:!1},{header:"Location",accessorKey:"location",enableColumnFilter:!1},{header:"Tags",accessorKey:"tags",enableColumnFilter:!1,cell:a=>e.jsx(e.Fragment,{children:a.getValue().map((l,n)=>e.jsx("span",{className:"badge bg-primary-subtle text-primary me-1",children:l},n))})},{header:"Create Date",accessorKey:"date",enableColumnFilter:!1,cell:a=>e.jsx(e.Fragment,{children:ae(a.getValue())})},{header:"Action",cell:a=>e.jsxs("ul",{className:"list-inline hstack gap-2 mb-0",children:[e.jsx("li",{className:"list-inline-item edit",title:"Call",children:e.jsx(x,{variant:"link",className:"p-0 text-muted d-inline-block",children:e.jsx("i",{className:"ri-phone-line fs-16"})})}),e.jsx("li",{className:"list-inline-item edit",title:"Message",children:e.jsx(x,{variant:"link",className:"p-0 text-muted d-inline-block",children:e.jsx("i",{className:"ri-question-answer-line fs-16"})})}),e.jsx("li",{className:"list-inline-item",title:"View",children:e.jsx(x,{variant:"link",children:e.jsx("i",{className:"ri-eye-fill align-bottom text-muted"})})}),e.jsx("li",{className:"list-inline-item",title:"Edit",children:e.jsx(x,{variant:"link",className:"p-0 edit-item-btn",onClick:()=>{const l=a.row.original;B(l)},children:e.jsx("i",{className:"ri-pencil-fill align-bottom text-muted"})})}),e.jsx("li",{className:"list-inline-item",title:"Delete",children:e.jsx(x,{variant:"link",className:"p-0 remove-item-btn",onClick:()=>{const l=a.row.original;G(l)},children:e.jsx("i",{className:"ri-delete-bin-fill align-bottom text-muted"})})})]})}],[B,w]);return e.jsxs(de.Fragment,{children:[e.jsx(me,{title:"Leads | Velzon - React Admin & Dashboard Template"}),e.jsxs("div",{className:"page-content",children:[e.jsx(P,{show:K,onDeleteClick:$,onCloseClick:()=>b(!1)}),e.jsx(P,{show:Y,onDeleteClick:()=>{oe(),C(!1)},onCloseClick:()=>C(!1)}),e.jsxs(Me,{fluid:!0,children:[e.jsx(ue,{title:"Leads",pageTitle:"CRM"}),e.jsx(v,{children:e.jsx(c,{lg:12,children:e.jsxs(L,{id:"leadsList",children:[e.jsx(L.Header,{className:"border-0",children:e.jsxs(v,{className:"g-4 align-items-center",children:[e.jsx(c,{sm:3,children:e.jsxs("div",{className:"search-box",children:[e.jsx(s.Control,{className:"form-control search",placeholder:"Search for..."}),e.jsx("i",{className:"ri-search-line search-icon"})]})}),e.jsx("div",{className:"col-sm-auto ms-auto",children:e.jsxs("div",{className:"hstack gap-2",children:[se&&e.jsx("button",{className:"btn btn-soft-danger",id:"remove-actions",onClick:()=>C(!0),children:e.jsx("i",{className:"ri-delete-bin-2-line"})}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:W,children:[e.jsx("i",{className:"ri-filter-3-line align-bottom me-1"})," ","Fliters"]}),e.jsxs("button",{type:"button",className:"btn btn-primary add-btn",id:"create-btn",onClick:()=>{g(!1),u()},children:[e.jsx("i",{className:"ri-add-line align-bottom me-1"})," Add Leads"]}),e.jsxs(m,{children:[e.jsx(m.Toggle,{variant:"soft-primary",className:"btn-icon fs-14 arrow-none",type:"button",id:"dropdown.MenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.jsx("i",{className:"ri-settings-4-line"})}),e.jsxs(m.Menu,{children:[e.jsx("li",{children:e.jsx(m.Item,{children:"Copy"})}),e.jsx("li",{children:e.jsx(m.Item,{children:"Move to pipline"})}),e.jsx("li",{children:e.jsx(m.Item,{children:"Add to exceptions"})}),e.jsx("li",{children:e.jsx(m.Item,{children:"Switch to common form view"})}),e.jsx("li",{children:e.jsx(m.Item,{children:"Reset form view to default"})})]})]})]})})]})}),e.jsxs(L.Body,{className:"pt-3",children:[e.jsx("div",{children:r&&r.length?e.jsx(fe,{columns:re,data:r||[],isGlobalFilter:!1,customPageSize:10,divClass:"table-responsive table-card",tableClass:"align-middle",theadClass:"table-light",handleLeadClick:Q,isLeadsFilter:!1}):e.jsx(Ne,{error:q})}),e.jsxs(f,{id:"showModal",show:N,onHide:u,centered:!0,children:[e.jsx(f.Header,{className:"bg-light p-3",closeButton:!0,children:e.jsx("h5",{className:"modal-title",children:j?"Edit Lead":"Add Lead"})}),e.jsxs(s,{className:"tablelist-form",onSubmit:a=>(a.preventDefault(),t.handleSubmit(),!1),children:[e.jsxs(f.Body,{children:[e.jsx(s.Control,{type:"hidden",id:"id-field"}),e.jsxs(v,{className:"g-3",children:[e.jsxs(c,{lg:12,children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsxs("div",{className:"position-absolute bottom-0 end-0",children:[e.jsx(s.Label,{htmlFor:"lead-image-input",className:"mb-0",children:e.jsx("div",{className:"avatar-xs cursor-pointer",children:e.jsx("div",{className:"avatar-title bg-light border rounded-circle text-muted",children:e.jsx("i",{className:"ri-image-fill"})})})}),e.jsx(s.Control,{className:"form-control d-none",id:"lead-image-input",type:"file",accept:"image/png, image/gif, image/jpeg",onChange:ee})]}),e.jsx("div",{className:"avatar-lg p-1",onClick:a=>Z(a),children:e.jsx("div",{className:"avatar-title bg-light rounded-circle",children:e.jsx("img",{src:O||t.values.img||ge,alt:"dummyImg",id:"lead-img",className:"avatar-md rounded-circle object-fit-cover"})})})]}),e.jsx("h5",{className:"fs-13 mt-3",children:"Lead Image"}),t.errors.img&&t.touched.img?e.jsxs(s.Control.Feedback,{type:"invalid",className:"d-block",children:[" ",t.errors.img," "]}):null]}),e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"name-field",className:"form-label",children:"Name"}),e.jsx(s.Control,{name:"name",id:"customername-field",className:"form-control",placeholder:"Enter Name",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.name||""}),t.touched.name&&t.errors.name?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.name}):null]})]}),e.jsx(c,{lg:12,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"company_name-field",className:"form-label",children:"Company Name"}),e.jsx(s.Control,{name:"company",id:"company_name-field",className:"form-control",placeholder:"Enter Company Name",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.company||""}),t.touched.company&&t.errors.company?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.company}):null]})}),e.jsx(c,{lg:6,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"leads_score-field",className:"form-label",children:"Leads Score"}),e.jsx(s.Control,{name:"score",id:"company_name-field",className:"form-control",placeholder:"Enter Score",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.score||""}),t.touched.score&&t.errors.score?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.score}):null]})}),e.jsx(c,{lg:6,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"phone-field",className:"form-label",children:"Phone"}),e.jsx(s.Control,{name:"phone",id:"phone-field",className:"form-control",placeholder:"Enter Phone Number",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.phone||""}),t.touched.phone&&t.errors.phone?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.phone}):null]})}),e.jsx(c,{lg:12,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"location-field",className:"form-label",children:"Location"}),e.jsx(s.Control,{name:"location",id:"location-field",className:"form-control",placeholder:"Enter Location",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.location||""}),t.touched.location&&t.errors.location?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.location}):null]})}),e.jsx(c,{lg:12,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"taginput-choices",className:"form-label",children:"Tags"}),e.jsx(he,{isMulti:!0,value:_,onChange:a=>{H(a)},className:"mb-0",styles:ie,options:U,id:"taginput-choices",defaultValue:t.values.tags||""}),t.touched.tags&&t.errors.tags?e.jsx(s.Control.Feedback,{type:"invalid",children:t.errors.tags}):null]})}),e.jsx(c,{lg:12,children:e.jsxs("div",{children:[e.jsx(s.Label,{htmlFor:"date-field",className:"form-label",children:"Created Date"}),e.jsx(pe,{name:"date",id:"datepicker-publish-input",className:"form-control",placeholder:"Select a date",options:{altInput:!0,altFormat:"d M, Y",dateFormat:"d M, Y"},onChange:a=>t.setFieldValue("date",V(a[0]).format("DD MMMM ,YYYY")),value:t.values.date||""}),t.errors.date&&t.touched.date?e.jsx(s.Control.Feedback,{type:"invalid",className:"d-block",children:t.errors.date}):null]})})]})]}),e.jsx(f.Footer,{children:e.jsxs("div",{className:"hstack gap-2 justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>{k(!1)},children:" Close "}),e.jsxs("button",{type:"submit",className:"btn btn-success",id:"add-btn",children:[" ",j?"Update":"Add Lead"," "]})]})})]})]}),e.jsx(ke,{closeButton:!1,limit:1})]})]})})})]})]}),e.jsx(je,{show:F,onCloseClick:()=>S(!1)})]})};Be.layout=d=>e.jsx(Le,{children:d});export{Be as default};
